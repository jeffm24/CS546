<!DOCTYPE html>
<html lang="en">

<head>
    <% include ../partials/head %>
</head>

<body>
    <div class="container">
        <h1><%= username %>'s Profile</h1>
        <ul>
            <li>First Name: <% if (firstName) { %> firstName <% } %></li>
            <li>Last Name: <% if (lastName) { %> lastName <% } %></li>
            <li>Hobby: <% if (hobby) { %> hobby <% } %></li>
            <li>Pet Name: <% if (petName) { %> petName <% } %></li>
        </ul>
        <hr />
        <h2>Edit Profile Info</h2>
        <form id="editInfoForm">
            <label>First Name: <input name="firstName" placeholder="First Name" type="text"></label>
            <br />
            <label>Last Name: <input name="lastName" placeholder="Last Name" type="text"></label>
            <br />
            <label>Hobby: <input name="hobby" placeholder="Hobby" type="text"></label>
            <br />
            <label>Pet Name: <input name="petName" placeholder="Pet Name" type="text"></label>
            <br />
            <input type="submit" value="Submit">
        </form>
        <hr />
        <div id="signOutBtn">
            <p>Sign Out</p>
        </div>
    </div>

    <% include ../partials/scripts %>

    <script>
        $('#editInfoForm').on('submit', function(e) {

            $.ajax({
                url: '/profile/editUserInfo',
                type: 'POST',
                data: {
                    'firstName': $('#editInfoForm input[name="firstName"]').val(),
                    'lastName': $('#editInfoForm input[name="lastName"]').val(),
                    'hobby': $('#editInfoForm input[name="hobby"]').val(),
                    'petName': $('#editInfoForm input[name="petName"]').val()
                },
                success: function(data) {
                    location.reload();
                },
                error: function(xhr, status, error) {
                    alert(xhr.responseText + ' (' + xhr.status + ')');
                }
            });

            return false;
        });

        $('#signOutBtn').on('click', function(e) {

            $.ajax({
                url: '/signout',
                type: 'POST',
                success: function(data) {
                    location.reload();
                },
                error: function(xhr, status, error) {
                    alert(xhr.responseText + ' (' + xhr.status + ')');
                }
            });

        });
    </script>
</body>

</html>
